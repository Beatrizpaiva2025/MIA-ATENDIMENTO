{% extends "admin_base.html" %}

{% block title %}Configuracoes - MIA Admin{% endblock %}

{% block extra_style %}
<style>
    .page-header h1 { font-size: 1.4em; color: #1e3a5f; margin-bottom: 5px; }
    .page-header p { font-size: 0.85em; color: #666; }

    .config-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 25px;
    }

    .config-card {
        background: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        border-left: 3px solid #5dade2;
    }

    .config-card h3 {
        font-size: 1em;
        color: #1e3a5f;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 1px solid #eee;
    }

    .config-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #f5f5f5;
        font-size: 0.85em;
    }

    .config-item:last-child { border-bottom: none; }
    .config-item .label { color: #666; font-weight: 500; }
    .config-item .value { font-weight: 600; color: #333; }

    .section-title {
        font-size: 1.1em;
        color: #1e3a5f;
        margin: 25px 0 15px;
        padding-bottom: 8px;
        border-bottom: 2px solid #5dade2;
    }

    .webhook-url {
        background: #f8f9fa;
        padding: 10px 15px;
        border-radius: 6px;
        font-family: monospace;
        font-size: 0.85em;
        word-break: break-all;
        margin-bottom: 10px;
        border: 1px solid #dee2e6;
    }

    .webhook-label {
        font-size: 0.8em;
        color: #666;
        margin-bottom: 5px;
        font-weight: 600;
    }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Configuracoes do Sistema</h1>
    <p>Status das integracoes e configuracoes gerais</p>
</div>

{% if error %}
<div style="background: #fff3cd; color: #856404; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
    {{ error }}
</div>
{% else %}

<!-- Status das Integracoes -->
<div class="config-grid">
    <div class="config-card">
        <h3>Integracoes</h3>
        <div class="config-item">
            <span class="label">OpenAI API</span>
            <span class="value">{{ config.openai_status }}</span>
        </div>
        <div class="config-item">
            <span class="label">MongoDB</span>
            <span class="value">{{ config.mongodb_status }}</span>
        </div>
        <div class="config-item">
            <span class="label">Z-API (WhatsApp)</span>
            <span class="value">{{ config.zapi_status }}</span>
        </div>
        <div class="config-item">
            <span class="label">Instagram</span>
            <span class="value">{{ config.instagram_status }}</span>
        </div>
    </div>

    <div class="config-card">
        <h3>Ambiente</h3>
        <div class="config-item">
            <span class="label">Ambiente</span>
            <span class="value">{{ config.ambiente }}</span>
        </div>
        <div class="config-item">
            <span class="label">URL</span>
            <span class="value" style="font-size: 0.75em;">{{ config.render_url }}</span>
        </div>
    </div>
</div>

<!-- Webhook URLs -->
<h3 class="section-title">Webhook URLs</h3>
{% if webhooks %}
    <div class="webhook-label">WhatsApp (Z-API)</div>
    <div class="webhook-url">{{ webhooks.whatsapp }}</div>

    <div class="webhook-label">Instagram</div>
    <div class="webhook-url">{{ webhooks.instagram }}</div>
{% endif %}

{% endif %}
{% endblock %}
